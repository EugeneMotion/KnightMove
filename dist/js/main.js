var arrMove,arrToCoord,arrToStr,calc,calcNStep,cellOk,elem_lines,init_lines,j,moveX,moveY,okMove,posDef,showLines,x;for(moveX=[1,2,2,1,-1,-2,-2,-1],moveY=[-2,-1,1,2,2,1,-1,-2],showLines=!0,posDef=[Math.floor(8*Math.random())+1,Math.floor(8*Math.random())+1],cellOk=[],x=j=-1;j<=10;x=++j)cellOk[x]=[];arrMove=function(o,e){return[o[0]+moveX[e-1],o[1]+moveY[e-1]]},arrToStr=function(o){return"#cell-"+o[0]+o[1]},okMove=function(o,e){return cellOk[o[0]+moveX[e-1]][o[1]+moveY[e-1]]},calcNStep=function(o){var e,r,l;for(l=0,e=r=1;r<=8;e=++r)okMove(o,e)&&l++;return l},arrToCoord=function(o){return 125*(o[0]-.5)+","+125*(o[1]-.5)},(calc=function(o){var e,r,l,t,n,s,a,c,i,m,h,f,d,v,u,g,k,M,p;for(d=o,x=t=-1;t<=10;x=++t)for(p=s=-1;s<=10;p=++s)cellOk[x][p]=x>0&&x<9&&p>0&&p<9;for(a=0,n=[],r=!0,$("g g text").html(""),$("g g text").removeClass("dark"),$("g g use").addClass("hidden"),$(".svg-line").html(""),$(arrToStr(d)+" use").removeClass("hidden"),showLines?h="M"+arrToCoord(d):($(arrToStr(d)+" text").html("0"),$(arrToStr(d)+" text").addClass("dark")),$(".info-pos").html("- start "+d),console.log("start from "+d),cellOk[d[0]][d[1]]=!1,k=performance.now();r;){for(c=9,u=0,l=i=1;i<=8;l=++i)okMove(o,l)&&(M=calcNStep(arrMove(o,l)))<c&&(c=M,u=l);(r=u>0)&&(o=arrMove(o,u),cellOk[o[0]][o[1]]=!1,n[++a]=u)}for(g=performance.now(),$(".info-iter").html("- moves "+a),console.log("- moves "+a),console.log("- calc time "+Math.round(g-k)+" ms"),f=d,l=m=1,v=a;1<=v?m<=v:m>=v;l=1<=v?++m:--m)f=arrMove(f,n[l]),showLines?h+="L"+arrToCoord(f):$(arrToStr(f)+" text").html(l);return showLines?$(".svg-line").html('<path d="'+h+'"/>'):$(arrToStr(f)+" text").addClass("dark"),$(arrToStr(f)+" use").removeClass("hidden"),g=performance.now(),e=" time "+Math.round(g-k)+" ms",console.log("- calc and out"+e),$(".info-time").html("-"+e),console.log("end")})(posDef),$("g g").click(function(){var o;return o=$(this).attr("id"),posDef=[+o[o.length-2],+o[o.length-1]],console.log("+ click"),calc(posDef)}),elem_lines=document.querySelector(".js-switch-lines"),init_lines=new Switchery(elem_lines,{color:"#D24D57",size:"small"}),elem_lines.onchange=function(){return console.log("- switch"),showLines=elem_lines.checked,calc(posDef)};